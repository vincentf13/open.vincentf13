# =========================================================
# Maven Daemon (mvnd) 全域高效構建配置
# =========================================================

# 依照 CPU 核心數自動配置執行緒，並啟用 Smart Builder
mvnd.threads=1C
mvnd.builder=smart

# 保持 daemon 暖機狀態，加快重複構建啟動時間
mvnd.keepAlive=2m
mvnd.idleTimeout=4h

# 啟用 Maven Build Cache 並共享至使用者目錄
mvnd.build.cache.enabled=true
maven.build.cache.directory=${user.home}/.m2/maven-build-cache

# 提高 Artifact 下載與解析併行度
mvnd.artifact.threads=32
maven.wagon.httpconnectionManager.maxTotal=128
maven.wagon.httpconnectionManager.maxPerRoute=32

# 啟用增量編譯
mvnd.compiler.useIncrementalCompilation=true

# 精簡傳輸日誌減少 I/O 阻塞
org.slf4j.simpleLogger.log.org.apache.maven.cli.transfer.Slf4jMavenTransferListener=warn

# =========================================================
# 構建優化：跳過非必要步驟（視需求啟用）
# =========================================================

# 完全跳過測試編譯與執行
#maven.test.skip=true

# 跳過 Javadoc 生成
maven.javadoc.skip=true

# 跳過程式碼風格檢查 (Checkstyle)
checkstyle.skip=true

# 跳過構建規則檢查 (Enforcer Plugin)
enforcer.skip=true

# =========================================================
# JVM 參數（保持與 .mvn/jvm.config 一致）
# =========================================================
mvnd.jvmArgs=-Xms512m -Xmx1536m -XX:+UseG1GC -XX:MaxGCPauseMillis=200 -XX:+ParallelRefProcEnabled -XX:+TieredCompilation -XX:+UseStringDeduplication -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/tmp/mvn_oom.hprof -XX:+ExitOnOutOfMemoryError

# 若需自訂 daemon 資料夾，可在執行 mvnd 時加上：
#   MVND_OPTS="-Dmvnd.daemonStorage=<path>" mvnd <goal>
